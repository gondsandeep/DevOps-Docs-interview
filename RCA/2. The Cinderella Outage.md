# The Cinderella Outage

## Incident Details

| Field | Value |
|-------|-------|
| **Severity** | SEV-2 (High) |
| **Service** | Core Backend / Database |
| **Duration** | 15 Minutes (Recurring Daily) |
| **Status** | Resolved |
| **Owner** | Infra/SRE Team |

---

## 1. Issue Summary

For the past 3 days, the primary backend server became unresponsive daily between 02:15 AM and 02:30 AM. Monitoring tools showed "No Data" during this window. SSH access was denied. The server spontaneously recovered at 02:30 AM without intervention.

---

## 2. Business Impact

### User Impact
Night-shift users and international traffic experienced total service unavailability for 15 minutes.

### Data Impact
No data loss, but scheduled nightly batch jobs failed and had to be manually retried.

---

## 3. Root Cause Analysis

**Why did the server hang?**  
The root filesystem (/) reached 100% utilization, preventing the OS from writing lock files or logs.

**Why did the disk fill up?**  
A race condition occurred between the Logging Service and the Backup Script.

### Detailed Findings
The application was running in DEBUG mode, generating massive log files in `/var/log`. Simultaneously, the nightly backup script ran at 02:00 AM, creating a large temporary .zip file on the same partition.

**Disk Space Calculation:**
- Logs: 15GB
- Temp Backup: 10GB
- Total Disk Space: 20GB
- **Result:** Logs (15GB) + Temp Backup (10GB) > Total Disk Space (20GB)

### Root Cause
**Resource Contention.** Lack of partition isolation between OS, Logs, and ephemeral backup data.

---

## 4. Resolution & Fix

### Immediate Fix
- Manually truncated old log files
- Changed Application Log Level from DEBUG to INFO

### Permanent Fix
- Re-configured the backup script to stream data directly to S3 (or use a separate `/tmp` volume) instead of writing to the root disk
- Implemented aggressive logrotate policies (daily rotation + compression)

---

## 5. Action Items

- **[High]** Repartition servers to separate `/var/log` and `/data` from the root OS (`/`)
- **[Low]** Audit all cron jobs for temporary file cleanup logic

